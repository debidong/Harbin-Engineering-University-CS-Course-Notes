# 数据库原理

*Author: Yang Bowen*

*Last modified: 2023/1/6*

# 1 关系数据库的规范化

一个低一级范式的关系模式通过模式分解(schema decomposition)可以转换为若干个高一级范式的关系模式的集合，这种过程就叫规范化(normalization)

## 基本概念

候选码：关系中的一个属性或者属性组，能够唯一标识一个元组，且它的真子集不能唯一标识元组

主码：从所有候选码中选择一个，作为主码

主属性：候选码的诸属性

一个关系关系表的候选码可能有多个，每个候选码可能包括多个主属性（多个属性列）

超码：不完全函数依赖，候选码是最小的超码

## 1NF

关系的每一个分量必须是不可分的数据项

## 2NF

属于第一范式的关系的每个非主属性完全依赖于任何一个候选码

即，所有属性列只能由候选码决定，不能由候选码的一部分决定

> SLC的码为(Sno,Cno)，Sdept和Sloc依赖于Sno，不依赖于Cno，则不满足第二范式

## 3NF

每一个非主属性既不传递依赖于码，也不部份依赖于码

即，候选码在决定非主属性时不能依靠传递性得到

> SLC的码为(Sno,Cno)，Sno决定Sdept，Sdept决定Sloc，存在Sno->Sdept->Sloc这样的传递依赖，则不满足第三范式

## BCNF（Boyce Codd Normal Form）

1. 所有非主属性对每一个码都是完全函数依赖
2. 所有主属性对每一个不包含他的码也是完全函数依赖
3. 没有任何属性完全依赖于非码的任何一组属性

即，*决定因素*必须是候选码，不能是非候选码或者是候选码的一部分

## 4NF

## 5NF

# 2 数据库设计

## 概念结构设计

### 概念模型

### E-R模型

关系分为单个实体内的联系、两个实体之间的联系、多个实体间的联系，均存在：

一对一联系（1：1）

> 两个实体间：班级：班长

一对多联系（1：n）

> 两个实体间：班级：学生
>
> 单个实体内：职工（关系：领导）

多对多联系（m：n）

> 两个实体间：课程：学生

联系的度：参与联系的实体型的数目，2个实体型之间的联系度为2，也称为二元联系；3个实体型之间的联系度为3，也称为三元联系；n个实体型之间的联系度为n，也称为n元联系

#### E-R图的表示方法

实体（entity）：矩形

属性（attribute）：椭圆形

联系（relation）：菱形

> 作为属性，不能再具有需要描述的性质。属性必须是不可分的数据项，不能包含其他属性
>
> 属性不能与其他实体具有联系，即E-R图中所表示的联系是实体之间的联系


